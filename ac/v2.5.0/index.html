<!DOCTYPE html>
<html>
<head>
    <title>AnimationsCore v2.5.0 - THE API</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap');

        :root{
            --bg:#171617;
            --fg:#ffffff;
            --muted:#bdbdbd;
            --accent:#6ee7ff;
            --card:#1f1e20;
            --card2:#242326;
        }

        *{box-sizing:border-box}
        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, sans-serif;
            color: var(--fg);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .titlebar{
            text-align:center;
            margin-bottom: 36px;
        }

        .logo {
            max-width: 120px;
            margin: 0 auto 16px;
            display:block;
        }

        .title {
            font-family: 'Oswald', sans-serif;
            font-size: clamp(36px, 6vw, 60px);
            line-height: 1.05;
            margin: 0;
            letter-spacing: 0.5px;
        }

        .grid{
            display:grid;
            grid-template-columns: 1fr;
            gap: 24px;
        }

        @media (min-width: 900px){
            .grid{
                grid-template-columns: 1fr 1fr;
            }
        }

        .section {
            background: linear-gradient(180deg, var(--card), var(--card2));
            border: 1px solid #2a292b;
            border-radius: 16px;
            padding: 20px;
        }

        .section h2 {
            font-family: 'Oswald', sans-serif;
            font-size: 28px;
            margin: 0 0 12px 0;
            display:flex;
            align-items:center;
            gap:10px;
        }

        .pill{
            font-size:12px;
            padding:4px 8px;
            background:#2a292b;
            border-radius:999px;
            color:var(--muted);
            border:1px solid #343336;
        }

        .legend{font-size:13px;color:var(--muted);margin:0 0 14px 0}

        ul{list-style:none; padding:0; margin:0}
        li{margin:0 0 12px 0}

        /* Feature group */
        .feature{
            border:1px solid #2e2d30;
            border-radius:12px;
            padding:12px;
            background:#1c1b1d;
        }
        .feature + .feature{margin-top:12px}
        .feature-title{
            font-weight:700;
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:12px;
        }
        .feature-details{
            margin-top:8px;
            padding-left:16px;
        }
        .feature-details li{margin:6px 0}

        /* One-liner bullet (for fixes or simple features) */
        .bullet{
            border:1px dashed #343336;
            border-radius:10px;
            padding:10px 12px;
            background:#1a191b;
        }

        /* Details toggle style */
        details{
            border:1px solid #2e2d30;
            border-radius:12px;
            padding:12px;
            background:#1c1b1d;
        }
        details + details{margin-top:12px}
        summary{
            cursor:pointer;
            font-weight:700;
        }
        summary::-webkit-details-marker{display:none}
    
        /* Splash overlay */
        #splash {
            position: fixed;
            inset: 0;
            background: #000000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            visibility: visible;
            transition: opacity 600ms ease, visibility 600ms ease;
        }
        #splash.fade-out {
            opacity: 0;
            visibility: hidden;
        }
        #splash img {
            max-width: min(40vw, 220px);
            height: auto;
            image-rendering: -webkit-optimize-contrast;
        }
        @media (prefers-reduced-motion: reduce) {
            #splash { transition: none; }
        }

    </style>
</head>
<body>
    <!-- Splash screen -->
    <div id="splash" aria-hidden="true">
        <img src="logo.png" alt="" />
    </div>

    <div class="container">
        <div class="titlebar">
            <img src="logo.png" alt="Logo" class="logo">
            <h1 class="title">CHANGELOG v2.5.0 | THE API UPDATE</h1>
        </div>

        <div class="grid">
            <section class="section">
                <h2>New Features</h2>
                <ul id="new-features-list"></ul>
            </section>

            <section class="section">
                <h2>Fixes</h2>
                <ul id="fixes-list"></ul>
            </section>
        </div>
    </div>

    <script>

        // Splash fade-out
        (function(){
            function hideSplash(){
                var el = document.getElementById('splash');
                if(!el) return;
                // Respect reduced motion
                var reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                var delay = reduce ? 0 : 2000;
                setTimeout(function(){
                    // In case CSS is missing, still remove after delay
                    el.classList && el.classList.add('fade-out');
                    el.addEventListener && el.addEventListener('transitionend', function(){ el.remove(); }, {once:true});
                    // Hard fallback remove after 800ms + delay
                    setTimeout(function(){ if (el && el.parentNode) el.parentNode.removeChild(el); }, 1000);
                }, delay);
            }
            if (document.readyState === 'complete') hideSplash();
            else window.addEventListener('load', hideSplash);
        })();

        async function loadFile(url) {
            const res = await fetch(url);
            if(!res.ok) throw new Error('Failed to load ' + url);
            return (await res.text()).replace(/\r\n/g, '\n');
        }

        function isTitle(line){ return line.startsWith('## '); }
        function isDesc(line){ return line.startsWith('- '); }

        function populateFixes(elementId, data){
            const list = document.getElementById(elementId);
            const lines = data.split('\n').map(l=>l.trim()).filter(Boolean);
            for(const line of lines){
                const li = document.createElement('li');
                li.className = 'bullet';
                li.textContent = line.replace(/^(-\s*)?/, '');
                list.appendChild(li);
            }
        }

        function populateFeatures(elementId, data){
            const list = document.getElementById(elementId);
            const lines = data.split('\n').map(l=>l.trim());

            let current = null; // {titleEl, ul}

            function flushStandalone(text){
                const li = document.createElement('li');
                li.className = 'bullet';
                li.textContent = text;
                list.appendChild(li);
            }

            for (const raw of lines){
                const line = raw.trim();
                if(!line) continue;

                if(isTitle(line)){
                    // if previous group had no details, render as standalone bullet instead
                    if(current && current.ul.childElementCount === 0){
                        // move previous as simple bullet
                        const simple = document.createElement('li');
                        simple.className = 'bullet';
                        simple.textContent = current.titleEl.textContent;
                        list.appendChild(simple);
                    }

                    // start new group as <details>
                    const details = document.createElement('details');
                    const summary = document.createElement('summary');
                    summary.className = 'feature-title';
                    summary.textContent = line.slice(3).trim();
                    details.appendChild(summary);

                    const ul = document.createElement('ul');
                    ul.className = 'feature-details';
                    details.appendChild(ul);

                    list.appendChild(details);
                    current = {container: details, titleEl: summary, ul};
                    continue;
                }

                if(isDesc(line)){
                    const text = line.replace(/^-\s*/, '');
                    if(!current){
                        // description without title -> treat as standalone
                        flushStandalone(text);
                    }else{
                        const li = document.createElement('li');
                        li.textContent = text;
                        current.ul.appendChild(li);
                    }
                }else{
                    // plain line
                    flushStandalone(line);
                }
            }

            // finalize last group: if it has no details, convert to bullet
            if(current && current.ul.childElementCount === 0){
                const bullet = document.createElement('li');
                bullet.className = 'bullet';
                bullet.textContent = current.titleEl.textContent;
                list.replaceChild(bullet, current.container);
            }
        }

        // Load files
        Promise.all([
            loadFile('newfeatures.txt').then(data => populateFeatures('new-features-list', data)).catch(err => console.error(err)),
            loadFile('fixes.txt').then(data => populateFixes('fixes-list', data)).catch(err => console.error(err)),
        ]);
    </script>
</body>
</html>
